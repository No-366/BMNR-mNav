<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ETH Holdings NAV Calculator</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      padding: 40px;
      max-width: 500px;
      width: 100%;
    }

    h1 {
      color: #333;
      margin-bottom: 10px;
      font-size: 28px;
      text-align: center;
    }

    .subtitle {
      color: #666;
      text-align: center;
      margin-bottom: 30px;
      font-size: 14px;
    }

    .info-section {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 25px;
      font-size: 13px;
      color: #555;
    }

    .info-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
    }

    .info-row:last-child {
      margin-bottom: 0;
    }

    .info-label {
      font-weight: 500;
    }

    .info-value {
      font-weight: 600;
      color: #667eea;
    }

    .input-group {
      margin-bottom: 20px;
    }

    .widget-section {
      margin-bottom: 20px;
    }

    .upbit-section {
      margin-bottom: 20px;
    }

    .upbit-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .upbit-header label {
      margin-bottom: 0;
    }

    .input-with-button {
      display: flex;
      gap: 8px;
    }

    .input-with-button input {
      flex: 1;
    }

    .widget-label {
      display: block;
      color: #333;
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .upbit-btn {
      padding: 10px 16px;
      background: linear-gradient(135deg, #00c896 0%, #00a876 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      white-space: nowrap;
    }

    .upbit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0, 200, 150, 0.3);
    }

    .upbit-btn:active {
      transform: translateY(0);
    }

    .upbit-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .bmnr-btn {
      padding: 10px 16px;
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      white-space: nowrap;
    }

    .bmnr-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(59, 130, 246, 0.3);
    }

    .bmnr-btn:active {
      transform: translateY(0);
    }

    .bmnr-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .upbit-price-display {
      margin-top: 10px;
      padding: 12px;
      background: #f0fdf7;
      border: 1px solid #00c896;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 14px;
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .upbit-price-display span {
      color: #00a876;
      font-weight: 700;
      font-size: 16px;
    }

    .copy-btn {
      padding: 6px 10px;
      background: #00c896;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.2s;
    }

    .copy-btn:hover {
      background: #00a876;
    }

    .copy-btn:active {
      transform: scale(0.95);
    }

    label {
      display: block;
      color: #333;
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 14px;
    }

    input {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 16px;
      transition: border-color 0.3s;
    }

    input:focus {
      outline: none;
      border-color: #667eea;
    }

    .calculate-btn {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      margin-top: 10px;
    }

    .calculate-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
    }

    .calculate-btn:active {
      transform: translateY(0);
    }

    .results {
      margin-top: 30px;
      padding: 25px;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      border-radius: 15px;
      display: none;
    }

    .results.show {
      display: block;
      animation: slideIn 0.4s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .result-item {
      margin-bottom: 15px;
      padding: 15px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .result-item:last-child {
      margin-bottom: 0;
    }

    .result-label {
      color: #666;
      font-size: 13px;
      margin-bottom: 5px;
      font-weight: 500;
    }

    .result-value {
      color: #333;
      font-size: 24px;
      font-weight: 700;
    }

    .premium {
      color: #e74c3c;
    }

    .discount {
      color: #27ae60;
    }

    .footer {
      margin-top: 20px;
      text-align: center;
      font-size: 12px;
      color: #999;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>ğŸ”· ì— ë•…í€ë“œ ğŸ”·</h1>
    <p class="subtitle">BMNR ìˆœìì‚°ê°€ì¹˜,í”„ë¦¬ë¯¸ì—„ ê³„ì‚°ê¸°</p>

    <div class="info-section">
      <div class="info-row">
        <span class="info-label">ETH Holdings:</span>
        <span class="info-value">3,505,723 ETH</span>
      </div>
      <div class="info-row">
        <span class="info-label">USD Holdings:</span>
        <span class="info-value">$398,000,000</span>
      </div>
      <div class="info-row">
        <span class="info-label">Alternative Assets:</span>
        <span class="info-value">$60,678,088</span>
      </div>
      <div class="info-row">
        <span class="info-label">Shares Outstanding:</span>
        <span class="info-value">376,104,294</span>
      </div>
    </div>

<div class="input-group eth-group" >
  <label for="ethPrice">
    ETH ê°€ê²© (USD)
    <button type="button"
            class="upbit-btn"
            onclick="applyUpbitEthPrice()"
            style="margin-left:195px;">
      ì—…ë¹„íŠ¸ ì‹œì„¸ ì ìš©
    </button>
  </label>

  <input type="number"
         id="ethPrice"
         placeholder="ì˜ˆ: 3384"
         step="0.01"
         min="0">

  <!-- ì‹œì„¸ ì„¤ëª…ìš© ì‘ì€ í…ìŠ¤íŠ¸ -->
  <small id="ethPriceInfo" style="display:block;margin-top:4px;color:#666;"></small>
</div>

    <div class="input-group">
      <label for="stockPrice">BMNR ì£¼ê°€ (USD) - ì„ íƒì‚¬í•­</label>
      <div class="input-with-button">
        <input type="number" id="stockPrice" placeholder="ì˜ˆ: 1.05" step="0.01" min="0">
        <!-- <button class="bmnr-btn" onclick="fetchBMNRPrice()">
                    <span id="bmnrBtnText">ğŸ“ˆ ì‹¤ì‹œê°„ ì‹œì„¸</span>
                </button> -->
      </div>
    </div>

    <div class="widget-section" style="display:none">
      <div class="widget-label">ì‹¤ì‹œê°„ í™˜ìœ¨ ë³€í™˜ê¸°</div>
      <!-- Currency Converter Script - EXCHANGERATEWIDGET.COM -->
      <div style="width:100%;border:1px solid #667eea;border-radius:10px;overflow:hidden;">
        <div style="text-align:center;background-color:#667eea;width:100%;font-size:13px;font-weight:bold;height:18px;padding-top:2px;">
          <a href="https://www.exchangeratewidget.com/" style="color:#FFFFFF;text-decoration:none;" rel="nofollow">Currency Converter</a>
        </div>
        <script type="text/javascript" src="https://www.exchangeratewidget.com/converter.php?l=en&f=KRW&t=USD&a=1&d=F0F0F0&n=FFFFFF&o=000000&v=1"></script>
      </div>
      <!-- End of Currency Converter Script -->
    </div>
    
    

    <button class="calculate-btn" onclick="calculate()">ê³„ì‚°í•˜ê¸°</button>

    <div class="results" id="results">
      <div class="result-item">
        <div class="result-label">Total Holdings Value</div>
        <div class="result-value" id="totalValue">-</div>
      </div>
      <div class="result-item">
        <div class="result-label">NAV per Share</div>
        <div class="result-value" id="navPerShare">-</div>
      </div>
      <div class="result-item" id="premiumSection" style="display: none;">
        <div class="result-label">Premium / Discount</div>
        <div class="result-value" id="premium">-</div>
      </div>
    </div>

    <div class="footer">
      (ì£¼) ì— ë•… í™€ë”©ìŠ¤
    </div>
  </div>

  <script>
    // Constants
    const ETH_HOLDINGS = 3505723;
    const USD_HOLDINGS = 398000000;
    const ALTERNATIVE_ASSETS = 60678088;
    const SHARES_OUTSTANDING = 376104294;
    let currentUpbitPrice = null;
    
 

    function formatNumber(num) {
      return new Intl.NumberFormat('en-US', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      }).format(num);
    }

    function calculate() {
      const ethPrice = parseFloat(document.getElementById('ethPrice').value);
      const stockPrice = parseFloat(document.getElementById('stockPrice').value);
      if (!ethPrice || ethPrice <= 0) {
        alert('ìœ íš¨í•œ ETH ê°€ê²©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      // Calculate total NAV
      const ethValue = ETH_HOLDINGS * ethPrice;
      const totalValue = ethValue + USD_HOLDINGS + ALTERNATIVE_ASSETS;
      // Calculate NAV per share
      const navPerShare = totalValue / SHARES_OUTSTANDING;
      // Display results
      document.getElementById('totalValue').textContent = '$' + formatNumber(totalValue);
      document.getElementById('navPerShare').textContent = '$' + formatNumber(navPerShare);
      // Calculate premium/discount if stock price is provided
      const premiumSection = document.getElementById('premiumSection');
      if (stockPrice && stockPrice > 0) {
        const premiumRate = ((stockPrice - navPerShare) / navPerShare) * 100;
        const premiumElement = document.getElementById('premium');
        if (premiumRate >= 0) {
          premiumElement.textContent = '+' + formatNumber(premiumRate) + '%';
          premiumElement.className = 'result-value premium';
        } else {
          premiumElement.textContent = formatNumber(premiumRate) + '%';
          premiumElement.className = 'result-value discount';
        }
        premiumSection.style.display = 'block';
      } else {
        premiumSection.style.display = 'none';
      }
      // Show results
      document.getElementById('results').classList.add('show');
    }
    // Allow Enter key to calculate
    document.getElementById('ethPrice').addEventListener('keypress', function(event) {
      if (event.key === 'Enter') {
        calculate();
      }
    });
    document.getElementById('stockPrice').addEventListener('keypress', function(event) {
      if (event.key === 'Enter') {
        calculate();
      }
    });
    
    async function fetchUpbitPrice() {
    const btnText   = document.getElementById('upbitBtnText');
    const display   = document.getElementById('upbitPriceDisplay');
    const krwSpan   = document.getElementById('upbitPrice');
    const usdSpan   = document.getElementById('upbitPriceUSD');

    btnText.textContent = 'â³ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...';

    try {
      // 1) ì—…ë¹„íŠ¸ì—ì„œ ETH í˜„ì¬ê°€ (KRW) ê°€ì ¸ì˜¤ê¸°
      const res = await fetch('https://api.upbit.com/v1/ticker?markets=KRW-ETH');
      if (!res.ok) throw new Error('Upbit API ì˜¤ë¥˜');

      const data = await res.json();
      const priceKrw = data[0].trade_price;  // ETH KRW í˜„ì¬ê°€

      // ë³´ê¸° ì¢‹ê²Œ í¬ë§·íŒ…
      krwSpan.textContent = priceKrw.toLocaleString('ko-KR', {
        maximumFractionDigits: 0
      }) + ' KRW';

      // 2) í™˜ìœ¨ ìœ„ì ¯ì˜ rates ë°°ì—´ì„ ì´ìš©í•´ì„œ USDë¡œ ë³€í™˜
      if (typeof rates !== 'undefined' && rates['KRW']) {
        // rates['KRW'] â‰ˆ 1 USD ë¥¼ ì‚¬ëŠ” ë° í•„ìš”í•œ ì›í™” ê¸ˆì•¡
        const priceUsd = priceKrw / rates['KRW'];

        usdSpan.textContent = priceUsd.toLocaleString('en-US', {
          maximumFractionDigits: 2
        }) + ' USD';
      } else {
        usdSpan.textContent = '(í™˜ìœ¨ ë°ì´í„° ì—†ìŒ)';
      }

      display.style.display = 'flex';
    } catch (e) {
      console.error(e);
      krwSpan.textContent = 'ì˜¤ë¥˜';
      usdSpan.textContent = '';
    } finally {
      btnText.textContent = 'ğŸ“Š ì‹œì„¸ í™•ì¸';
    }
  }

  function copyUpbitPrice() {
    const krwText = document.getElementById('upbitPrice').textContent;
    navigator.clipboard.writeText(krwText)
      .then(() => alert('KRW ê°€ê²©ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.'))
      .catch(() => alert('ë³µì‚¬ ì‹¤íŒ¨'));
  }
    
    async function applyUpbitEthPrice() {
    const btn   = document.querySelector('.eth-group .upbit-btn');
    const input = document.getElementById('ethPrice');
    const info  = document.getElementById('ethPriceInfo');

    const originalText = btn.textContent;
    btn.disabled = true;
    btn.textContent = 'â³ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...';

    try {
      // 1) ì—…ë¹„íŠ¸ì—ì„œ ETH í˜„ì¬ê°€ (KRW) ê°€ì ¸ì˜¤ê¸°
      const res = await fetch('https://api.upbit.com/v1/ticker?markets=KRW-ETH');
      if (!res.ok) throw new Error('Upbit API ì˜¤ë¥˜');

      const data = await res.json();
      const priceKrw = data[0].trade_price;  // ETH í˜„ì¬ê°€ (KRW)

      // 2) í™˜ìœ¨ ìœ„ì ¯ì˜ rates ë°°ì—´ì„ ì´ìš©í•´ì„œ USD ê°€ê²© ê³„ì‚°
      if (typeof rates === 'undefined' || !rates['KRW']) {
        throw new Error('í™˜ìœ¨ ë°ì´í„°(rates[\"KRW\"])ê°€ ì—†ìŠµë‹ˆë‹¤.');
      }

      // 1 USD = rates['KRW'] ì› ì´ë¼ê³  ë³¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ:
      const priceUsd = priceKrw / rates['KRW'];
      const roundedUsd = priceUsd.toFixed(2); // ì†Œìˆ˜ ë‘˜ì§¸ ìë¦¬ê¹Œì§€

      // 3) ETH ê°€ê²© ì…ë ¥ì¹¸ì— ìë™ ì…ë ¥
      input.value = roundedUsd;

      // 4) ì•„ë˜ ì„¤ëª… í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
      info.textContent =
        `ì—…ë¹„íŠ¸ ê¸°ì¤€ ì•½ ${priceKrw.toLocaleString('ko-KR')} KRW â‰ˆ ${roundedUsd} USD ì ìš©ë¨`;
    } catch (e) {
      console.error(e);
      info.textContent = 'ì‹œì„¸ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.';
    } finally {
      btn.disabled = false;
      btn.textContent = originalText;
    }
  }
  </script>
  
  
</body>

</html>
